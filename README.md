# Food Delivery Core System

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã –Ω–∞ —Å—Ç–µ–∫–µ Node.js, Postgres, Redis, RabbitMQ, Docker Compose.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
API Gateway ‚Üí [Order Service ‚Üí Delivery Service ‚Üí Notification Service]
| | | |
Redis Postgres Redis RabbitMQ

## –°–µ—Ä–≤–∏—Å—ã

1. **API Gateway** (3000) - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **Order Service** (3001) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏, –ø–ª–∞—Ç–µ–∂–∏, Saga –ø–∞—Ç—Ç–µ—Ä–Ω
3. **Delivery Service** (3002) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–æ–π, –≥–µ–æ–ø–æ–∏—Å–∫ –∫—É—Ä—å–µ—Ä–æ–≤
4. **Notification Service** - email/push/SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –ó–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫
git clone <repository>
cd food-delivery-core
docker-compose up -d --build

# –ü—Ä–æ–≤–µ—Ä–∫–∞
docker-compose ps
API Endpoints
API Gateway (http://localhost:3000)
POST /api/auth/token - –ø–æ–ª—É—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π JWT

POST /api/orders - —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ (—Ç—Ä–µ–±—É–µ—Ç—Å—è Authorization: Bearer <token>)

GET /api/orders/:id - –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–µ

GET /api/orders/:id/status - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞

Order Service (http://localhost:3001)
POST /orders - —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑

GET /orders/:id - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑

PATCH /orders/:id/status - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å

GET /users/:userId/orders - –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

Delivery Service (http://localhost:3002)
POST /couriers/register - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—å–µ—Ä–∞

GET /couriers/nearby - –Ω–∞–π—Ç–∏ –±–ª–∏–∂–∞–π—à–∏—Ö –∫—É—Ä—å–µ—Ä–æ–≤

POST /orders/:orderId/assign - –Ω–∞–∑–Ω–∞—á–∏—Ç—å –∫—É—Ä—å–µ—Ä–∞

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞
curl -X POST http://localhost:3000/api/orders \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $(curl -s -X POST http://localhost:3000/api/auth/token | jq -r '.token')" \
  -d '{
    "userId": "user-123",
    "restaurantId": "restaurant-456",
    "totalAmount": 1500,
    "deliveryAddress": {
      "address": "—É–ª. –¢–µ—Å—Ç–æ–≤–∞—è, –¥. 1",
      "lat": 55.7558,
      "lng": 37.6176
    },
    "items": [
      {
        "itemId": "pizza-1",
        "name": "–ü–µ–ø–ø–µ—Ä–æ–Ω–∏",
        "quantity": 2,
        "price": 750
      }
    ]
  }'
–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
RabbitMQ UI: http://localhost:15672 (admin/admin123)

Health checks: http://localhost:3000/health

–õ–æ–≥–∏: docker-compose logs -f <service-name>

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
cd api-gateway && npm run dev
cd order-service && npm run dev
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
Node.js 18 + Express

PostgreSQL - –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö

Redis - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –≥–µ–æ–¥–∞–Ω–Ω—ã–µ, —Å–µ—Å—Å–∏–∏

RabbitMQ - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è

Docker Compose - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

JWT - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

Sequelize - ORM –¥–ª—è PostgreSQL


## üéØ **–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏:**

1. **–ü–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
2. **–†–∞–±–æ—Ç–∞ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏** - –ø–∞—Ç—Ç–µ—Ä–Ω Saga
3. **Event-Driven –¥–∏–∑–∞–π–Ω** - RabbitMQ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π** - Redis –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (—Å—Ç–∞—Ç—É—Å—ã, –≥–µ–æ–¥–∞–Ω–Ω—ã–µ)
5. **Graceful shutdown** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
6. **Health checks** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
7. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ correlation ID** - —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å—ã
8. **Docker-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
9. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫–∞** - —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

–≠—Ç–æ **–ø—Ä–æ–¥–∞–∫—à–µ–Ω1-–≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ**, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–µ–µ —Ä–µ–∞–ª—å–Ω—ã–π –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.